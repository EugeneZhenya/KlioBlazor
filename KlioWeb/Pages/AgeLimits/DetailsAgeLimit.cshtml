@page "/age/{LimitName}"
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@using KlioBlazor.Shared.Enums
@model KlioWeb.Pages.AgeLimits.DetailsAgeLimitModel
@inject CurrentCategory currentCategory

@{
    AgeCategory ageEnum = (AgeCategory)Enum.Parse(typeof(AgeCategory), Model.LimitName);
    string limitName = string.Empty;
    string limitDesc = string.Empty;
    @switch ((int)ageEnum)
    {
        case 0:
            limitName = "Без вікових обмежень";
            limitDesc = "Фільми цієї категорії розраховано на глядачів будь-якого віку, зокрема й на дітей. Вони максимально прийнятні для сімейного перегляду, бо порушують теми, цікаві та зрозумілі більшості глядачів. У таких фільмах не допускаються грубість, насилля, жорстокість, непристойні вислови в будь-якій формі, показ сексу та вживання наркотиків. Реалії складної дійсності (смерть, війна, страждання, горе, жахіття тощо) мають відображатися у максимально коректній формі.";
            break;
        case 12:
            limitName = "Дітям від 12 років у присутності батьків";
            limitDesc = "Фільми та передачі категорії «12+» можуть містити деякі сцени, які є неприйнятними для дітей, тому їх перегляд дозволений тільки за присутності батьків або осіб, що їх замінюють. Допускається естетична демонстрація оголеного тіла без показу статевих органів, епізодичне використання грубих слів та ненормативної лексики. Такі сцени повинні бути короткими за хронометражем, зняті з використанням засобів художньої виразності, їхня необхідність обумовлена логікою сюжету.";
            break;
        case 16:
            limitName = "Не для осіб віком до 16 років";
            limitDesc = "Прегляд фільмів не рекомендується особам віком до 16 років, оскільки такі стрічки можуть містити сцени з обмеженим ступенем насильства та жорстокості (бійки, застосування зброї без надмірного кровопролиття, обмежене зображення нещасного випадку або катастрофи). Допускаються короткі та епізодичні зображення оголеного тіла, сцени кохання без детального показу статевих органів, використання грубих слів і ненормативної лексики, що наявні в оригіналі за задумом режисера та необхідні для розвитку сюжету.";
            break;
        case 18:
            limitName = "Забороняється особам віком до 18 років";
            limitDesc = "Фільми цієї категорії призначені тільки для дорослих, тому перегляд їх рекомендується тільки повнолітніми глядачами. До цієї категорії належать фільми з високим ступенем насильства, жорстокості, зображення катастроф, жахів, відвертого показу оголеного тіла, імітації інтимних стосунків. Їхня наявність повинна бути виправдана логікою сюжету та втілена на екрані з максимальним ступенем умовності.";
            break;
    }

    OpenGraphModel allMeta = new OpenGraphModel();

    allMeta.Title = EnumHelper<AgeCategory>.GetDisplayValue(ageEnum);
    allMeta.Description = EnumHelper<AgeCategory>.GetDisplayValue(ageEnum) + " дивитися он-лайн, " + limitName;
    allMeta.Robots = "all";
    allMeta.Author = "Eugene Baklanov";
    allMeta.Keywords = "Klio, архів, video, відео, історія, література, політика, музика, music, наживо, трансляція, пряма трансляція, дивитися он-лайн, фільм, серіал, сезон, епізод, мультфільм, мультсерал";
    allMeta.Type = "article";
    allMeta.Image = ($"{Request.Scheme}://{Request.Host}/img/WatchTVMockup.jpg").Replace("https://", "http://");
    allMeta.SecureImage = ($"{Request.Scheme}://{Request.Host}/img/WatchTVMockup.jpg").Replace("http://", "https://");
    allMeta.ImageWidth = 1920;
    allMeta.ImageHeight = 1080;
    allMeta.ImageType = "image/jpeg";
    allMeta.Url = $"{Request.Scheme}://{Request.Host}{Request.Path}{Request.QueryString}";
    allMeta.SiteName = "Медійний архів 'KLIO'";
    allMeta.Locale = "uk_UA";
    allMeta.FBAdmins = "100007730161243,100002204709179";
    allMeta.FBAppId = "885986785210347";
    allMeta.Image2 = ($"{Request.Scheme}://{Request.Host}/img/logo_750_transp.png").Replace("https://", "http://");
    allMeta.SecureImage2 = ($"{Request.Scheme}://{Request.Host}/img/logo_750_transp.png").Replace("http://", "https://");
    allMeta.ImageWidth2 = 750;
    allMeta.ImageHeight2 = 750;
    allMeta.ImageType2 = "image/png";

    currentCategory.SetCurrentCategory(0);

    ViewBag.Meta = allMeta;
}

<section class="movie-details-area" data-background="@($"{Model.AppState.KlioContentUrl}movies/{Model.LastMovie.Id}/background.jpg")">
        <div class="movie-details-overlay">
            <div class="container">
                <div class="row align-items-center position-relative">
                    <div class="col-xl-6 col-lg-6">
                        <div class="movie-details-content">
                            <div class="section-title title-style-two">
                                <span class="sub-title">@Html.Raw(limitName)</span>
                            </div>
                            <h2>
                                @Html.Raw(EnumHelper<AgeCategory>.GetDisplayValue(ageEnum))
                            </h2>
                            <div class="banner-meta">
                                <p>@Html.Raw(limitDesc)</p>
                            </div>
                            <div class="banner-meta">
                                <ul style="justify-content: end;">
                                    <li class="release-time">
                                        <span>@Model.TotalRecords фільмів</span>
                                    </li>
                                </ul>
                            </div>
                            <div class="movie-details-prime">
                                <ul style="min-width: 100%;">
                                    <li class="share"><i class="fa-solid fa-share-nodes"></i><br />Поширити</li>
                                    <li class="streaming" style="text-align: center; margin-right: 25px;">
                                        <div class="fb-share-button" data-href="@($"{Request.Scheme}://{Request.Host}{Request.Path}{Request.QueryString}")" data-layout="" data-size="">
                                        <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=@(Uri.EscapeDataString($"{Request.Scheme}://{Request.Host}{Request.Path}{Request.QueryString}"))&amp;src=sdkpreparse">
                                            <h6 class="share_link"><i class="fa-brands fa-facebook"></i></h6>
                                            <span>Facebook</span>
                                        </a>
                                        </div>
                                    </li>
                                    <li class="streaming" style="text-align: center; margin-right: 25px;">
                                        <a target="_blank" href="https://twitter.com/share?url=@(Uri.EscapeDataString($"{Request.Scheme}://{Request.Host}{Request.Path}{Request.QueryString}"))">
                                            <h6 class="share_link"><i class="fa-brands fa-x-twitter"></i></h6>
                                            <span>X-Twitter</span>
                                        </a>
                                    </li>
                                    <li class="streaming" style="text-align: center; margin-right: 25px;">
                                    <a target="_blank" href="https://t.me/share/url?url=@(Uri.EscapeDataString($"{Request.Scheme}://{Request.Host}{Request.Path}{Request.QueryString}&text={limitName}"))">
                                            <h6 class="share_link"><i class="fa-brands fa-telegram"></i></h6>
                                            <span>Telegram</span>
                                        </a>
                                    </li>
                                    <li class="streaming" style="text-align: center;">
                                        <a target="_blank" href="@Html.Raw($"mailto:?subject={limitName}&body=Раджу подивитися цікаві відео за цим посиланням: {Request.Scheme}://{Request.Host}{Request.Path}{Request.QueryString}")">
                                            <h6 class="share_link"><i class="fa-regular fa-envelope"></i></h6>
                                            <span>Пошта</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <div id="fb-root"></div>
                        </div>
                    </div>

                    <div class="col-xl-6 col-lg-6" style="align-self: start; margin-top: 10px;">
                        <div class="movie-details-img" style="text-align: center;">
                            <img src="inf/@(EnumHelper<AgeCategory>.GetEnumDescription(ageEnum)).webp" alt="@Html.Raw(EnumHelper<AgeCategory>.GetDisplayValue(ageEnum))" style="max-width: 100%;">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

<partial name="MoviesArea" model="Model.AgeLimitsMovies" />

<paging page-no="Model.FilterMoviesDTO.Page"
        page-size="Model.PageSize"
        total-records="Model.TotalRecords"
        max-displayed-pages="5"
        query-string-key-page-no="page"
        show-page-size-nav="false"
        show-total-pages="false"
        show-total-records="false"
        class="mb-5 mt-5"
        class-paging-control="pagination justify-content-center">
</paging>

@if (Model.MoviesArea != null)
{
    <partial name="MoviesArea" model="Model.MoviesArea" />
}

@section Scripts {
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/uk_UA/sdk.js#xfbml=1&version=v19.0&appId=146729146676782" nonce="34AbfMpj"></script>
}
