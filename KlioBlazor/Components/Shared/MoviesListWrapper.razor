@rendermode @(new InteractiveServerRenderMode(prerender: false))
@attribute [StreamRendering]
@inject SingletonService singleton
@inject TransientService transient


<p>Singleton count: @singleton.Value</p>
<p>Transient count: @transient.Value</p>

<MoviesList Movies="Movies" />

<button class="btn" @onclick="AddNewMoview">Add new moview</button>

@code {
    [Parameter] public List<Movie> Movies { get; set; }

    private void AddNewMoview()
    {
        Movies.Add(new Movie() { Title = "Movie Sample", ReleaseDate = DateTime.Today });
        transient.Value = Movies.Count;
        singleton.Value = Movies.Count;
    }
}
